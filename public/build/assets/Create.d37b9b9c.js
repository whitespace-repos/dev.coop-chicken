import{B as A}from"./Authenticated.4bf69a33.js";import{H as E,p as U,w,r as u,B as x,o as t,a as p,d as o,n as c,m as f,C as h,c as a,e as _,t as n,F as v,f as $,s as z}from"./app.34dda1bd.js";import{r as g,e as F,n as L,u as T}from"./index.esm.a0b94528.js";import{F as C}from"./fuse.esm.249bd5bb.js";import{_ as D}from"./ResponsiveNavLink.4100381f.js";const N={props:["shops","allShops"],components:{BreezeAuthenticatedLayout:A,Head:E},data(){return{form:this.$inertia.form({name:"",email:"",password:"",password_confirmation:"",terms:!1,phone:"",shop_id:"",role:"Employee"})}},methods:{fuseSearch(d,s){const b=new C(d,{keys:["shop_name","shop_id"],shouldSort:!0});return s.length?b.search(s).map(({item:r})=>r):b.list},submit(){this.form.post(route("user.store"),{onFinish:()=>{this.form.reset("password","password_confirmation"),this.$toast.success(this.form.role+" created successfully")}})}},computed:{filterShopList(){return this.form.role=="Employee"?this.shops:this.allShops}},mounted(){},validations(){return{form:{name:{required:g},email:{email:F},password:{required:g},phone:{required:g,numeric:L},shop_id:{}}}},setup(){return{v$:T()}}},H=o("h6",{class:"mb-0"},[o("span",{"data-feather":"user",class:"align-text-bottom"}),$(" Add New User")],-1),M=o("hr",{class:"border-danger bg-danger border w-100"},null,-1),P={class:"card shadow-lg card-body"},R={class:"row"},q=o("label",null,"Full Name",-1),j=o("label",null,"Email",-1),G=o("label",null,"Phone",-1),I=o("label",null,"Password",-1),J={class:"form-group col-md-4"},K=o("label",null," Role ",-1),O={class:"form-group col-md-4"},Q=o("label",null,"Shop",-1),W=o("br",null,null,-1),X={class:"form-group col-md-12"},Y=o("hr",null,null,-1),Z=["disabled"];function ee(d,s,b,r,m,i){const V=u("Head"),k=u("BreezeValidationErrors"),y=u("v-select"),S=u("BreezeAuthenticatedLayout"),B=x("maska");return t(),U(S,null,{default:w(()=>[p(V,{title:"Register"}),H,p(k,{class:"mb-4"}),M,o("form",{onSubmit:s[6]||(s[6]=z((...e)=>i.submit&&i.submit(...e),["prevent"]))},[o("div",P,[o("div",R,[o("div",{class:c(["form-group col-md-4",{"has-error":r.v$.form.name.$errors.length}])},[q,f(o("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>r.v$.form.name.$model=e),placeholder:"Type name here",class:"form-control"},null,512),[[h,r.v$.form.name.$model]]),(t(!0),a(v,null,_(r.v$.form.name.$errors,(e,l)=>(t(),a("small",{key:l},n(e.$message),1))),128))],2),o("div",{class:c(["form-group col-md-4",{"has-error":r.v$.form.email.$errors.length}])},[j,f(o("input",{"onUpdate:modelValue":s[1]||(s[1]=e=>r.v$.form.email.$model=e),placeholder:"Type email address here",class:"form-control"},null,512),[[h,r.v$.form.email.$model]]),(t(!0),a(v,null,_(r.v$.form.email.$errors,(e,l)=>(t(),a("small",{key:l},n(e.$message),1))),128))],2),o("div",{class:c(["form-group col-md-4",{"has-error":r.v$.form.phone.$errors.length}])},[G,f(o("input",{"onUpdate:modelValue":s[2]||(s[2]=e=>r.v$.form.phone.$model=e),placeholder:"Type phone number here",class:"form-control"},null,512),[[h,r.v$.form.phone.$model],[B,"#*"]]),(t(!0),a(v,null,_(r.v$.form.phone.$errors,(e,l)=>(t(),a("small",{key:l},n(e.$message),1))),128))],2),o("div",{class:c(["form-group col-md-4",{"has-error":r.v$.form.password.$errors.length}])},[I,f(o("input",{"onUpdate:modelValue":s[3]||(s[3]=e=>r.v$.form.password.$model=e),placeholder:"Type password here",class:"form-control"},null,512),[[h,r.v$.form.password.$model]]),(t(!0),a(v,null,_(r.v$.form.password.$errors,(e,l)=>(t(),a("small",{key:l},n(e.$message),1))),128))],2),o("div",J,[K,p(y,{options:["Employee","Supplier"],clearable:!1,modelValue:m.form.role,"onUpdate:modelValue":s[4]||(s[4]=e=>m.form.role=e),disabled:!d.auth.isAdmin,noDrop:!d.auth.isAdmin},null,8,["modelValue","disabled","noDrop"])]),o("div",O,[Q,p(y,{modelValue:m.form.shop_id,"onUpdate:modelValue":s[5]||(s[5]=e=>m.form.shop_id=e),filter:i.fuseSearch,options:i.filterShopList,multiple:m.form.role=="Supplier","get-option-key":e=>e.id,"get-option-label":e=>e.shop_name},{option:w(({shop_name:e,shop_id:l})=>[$(n(e)+" ",1),W,o("cite",null,n(l),1)]),_:1},8,["modelValue","filter","options","multiple","get-option-key","get-option-label"])]),o("div",X,[Y,o("button",{class:"btn btn-danger px-3 add-btn btn-sm",type:"submit",disabled:r.v$.form.$invalid},"Add "+n(m.form.role),9,Z)])])])],32)]),_:1})}var ae=D(N,[["render",ee]]);export{ae as default};
