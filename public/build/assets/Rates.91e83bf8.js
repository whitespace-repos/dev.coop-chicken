import{B}from"./Authenticated.4bf69a33.js";import{H as M,A as k,c as s,a as v,w as T,F as u,r as w,B as O,o,d as e,t as r,m as b,D as C,e as _,n as D,C as V,f as h,b as g,s as A}from"./app.34dda1bd.js";import{c as f,u as E,a as U,r as P}from"./index.esm.a0b94528.js";import{_ as z}from"./ResponsiveNavLink.4100381f.js";const R=f.regex(/^\d+(?:\.\d{1,2})?$/),F={setup(){return{v$:E()}},components:{BreezeAuthenticatedLayout:B,Head:M},computed:{currentDate(){const a=new Date;return`${a.getDate()}-${a.getMonth()+1}-${a.getFullYear()}`},defaultWholesaleWeightValidation(){let a={};return this.selectedProduct.wholesale_weight_range==0?{rateValidation:f.withMessage("Please Enter a Valid Rate",R),required:U(this.selectedProduct.wholesale_weight_range==0)}:a},weightRangeValidation(){let a={};return this.selectedProduct.wholesale_weight_range==1&&this.selectedProduct.weight_ranges.filter(function(l,c){let d="range-"+l.id,m='{"range-'+l.id+'" : null}',n=JSON.parse(m);k.exports.set(n,d,{rateValidation:f.withMessage("Please Enter a Valid Rate",R),required:P}),k.exports.assign(a,n)}),a}},props:["products","selectedProduct","rates"],data(){return{form:{rate:this.$inertia.form({product_id:null,range:{},retail_rate:0,wholesale_rate:0,default_wholesale_weight:0}),selectedRate:this.$inertia.form({id:0,product_id:null,product:{product_name:""},range:{},retail_rate:0,wholesale_rate:0})},_token:"",date:new Date}},validations(){return{form:{rate:{retail_rate:{rateValidation:f.withMessage("Please Enter a Valid Rate",R),required:P},range:this.weightRangeValidation}}}},methods:{addRate:function(a){!this.v$.form.rate.$validate()||this.form.rate.post(this.route("rate.store"),{onSuccess:c=>{this.form.rate.reset(),this.v$.form.rate.$reset(),this.$toast.success("Rate added successfully.")}})},getRateDetail:function(a){this.$inertia.get(this.route("rate.index"),{date:a.id},{only:["rates"]}),this.$toast.info("Today's Rate chart updated")},parseToJSON(a){return JSON.parse(a)}},mounted(){this.form.rate.product_id=this.selectedProduct.id,this._token=$('meta[name="csrf-token"]').attr("content"),feather.replace({"aria-hidden":"true"})}},H=e("h6",{class:"d-flex align-items-center mb-1"},[e("span",{"data-feather":"calendar",class:"align-text-bottom mr-2"}),h(" Set / Update Today's Rate ")],-1),J={class:"text-danger ml-4"},L=h("Date: "),q=e("hr",null,null,-1),I={class:"row"},W={class:"col-md-8"},j={class:"form-group"},X=e("label",null," Select Product ",-1),Y=["value"],G={class:"col-md-4"},K=e("label",null,"Retail Rate ",-1),Q={class:"row"},Z={class:"badge badge-danger font-weight-normal"},ee=["name","onUpdate:modelValue"],te={key:0},ae={class:"col-md-12"},se=e("hr",null,null,-1),oe=["disabled"],re=e("span",{"data-feather":"database",class:"mr-2 align-text-bottom"},null,-1),le=h(" Save Rate"),de=[re,le],ne={class:"row"},ie={class:"col"},ce={class:"card"},ue=e("div",{class:"card-header bg-white heading m-0"}," Today's Rate chart ",-1),he={class:"card-body p-0"},_e={class:"table-responsive"},me={cellpadding:"0",cellspacing:"0",class:"table mb-0 table-striped table-sm table-hover"},ge=e("thead",null,[e("tr",null,[e("th",null,"Product"),e("th",null,"Date"),e("th",null,"Wholesale Rate"),e("th",null,"Retail Rate"),e("th",null,"Status")])],-1),fe={key:0,class:"badge badge-danger font-weight-normal mr-2"},pe=e("sup",null,"INR ",-1),ve={class:"badge badge-danger font-weight-normal"},we=e("sup",null,"INR ",-1),be={class:"badge badge-danger font-weight-normal"},Re={key:1},ye=e("td",{colspan:"5",class:"p-3 text-center"}," No Record Found.",-1),ke=[ye],De={class:"px-3"};function Ve(a,l,c,d,m,n){const S=w("Head"),x=w("v-calendar"),N=w("BreezeAuthenticatedLayout"),y=O("maska");return o(),s(u,null,[v(S,{title:"Dashboard"}),v(N,null,{default:T(()=>[H,e("small",J,[L,e("strong",null,r(n.currentDate),1)]),q,e("form",{method:"POST",onSubmit:l[3]||(l[3]=A((...t)=>n.addRate&&n.addRate(...t),["prevent"])),class:"font-weight-bold shadow-lg p-3 rounded-lg"},[e("div",I,[e("div",W,[e("div",j,[X,b(e("select",{class:"form-control",name:"product_id","onUpdate:modelValue":l[0]||(l[0]=t=>m.form.rate.product_id=t),onChange:l[1]||(l[1]=t=>this.$inertia.get("/rate/"+t.target.value))},[(o(!0),s(u,null,_(c.products,t=>(o(),s("option",{key:t.id,value:t.id},r(t.product_name),9,Y))),128))],544),[[C,m.form.rate.product_id]])])]),e("div",G,[e("div",{class:D(["form-group",{"has-error":d.v$.form.rate.retail_rate.$errors.length}])},[K,b(e("input",{class:"form-control",name:"retail_rate","onUpdate:modelValue":l[2]||(l[2]=t=>d.v$.form.rate.retail_rate.$model=t)},null,512),[[y,"#*.##"],[V,d.v$.form.rate.retail_rate.$model]]),(o(!0),s(u,null,_(d.v$.form.rate.retail_rate.$errors,(t,i)=>(o(),s("small",{key:i},r(t.$message),1))),128))],2)])]),e("div",Q,[(o(!0),s(u,null,_(c.selectedProduct.weight_ranges,(t,i)=>(o(),s("div",{class:"col",key:t.id},[t.from!=0||t.to!=0?(o(),s("div",{key:0,class:D(["form-group",{"has-error":d.v$.form.rate.range["range-"+t.id].$error}])},[e("label",null,[h("Range "+r(i+1)+" : ",1),e("label",Z,r(a.toDecimal(t.from)+" - ")+" "+r(t.to==5e4?"MAX":a.toDecimal(t.to))+" "+r(c.selectedProduct.weight_unit),1)]),b(e("input",{class:"form-control",name:t.id,"onUpdate:modelValue":p=>d.v$.form.rate.range["range-"+t.id].$model=p},null,8,ee),[[y,"#*.##"],[V,d.v$.form.rate.range["range-"+t.id].$model]]),d.v$.form.rate.range["range-"+t.id].$error?(o(),s("small",te,r("Please Enter a Valid Rate"))):g("",!0)],2)):g("",!0)]))),128)),e("div",ae,[se,e("button",{class:"btn btn-danger px-5",type:"submit",disabled:d.v$.form.rate.$invalid},de,8,oe)])])],32),e("div",ne,[e("div",ie,[e("div",ce,[ue,e("div",he,[e("div",_e,[e("table",me,[ge,e("tbody",null,[c.rates.length>0?(o(!0),s(u,{key:0},_(c.rates,t=>(o(),s("tr",{key:t.id},[e("td",null,r(t.product.product_name),1),e("td",null,r(t.date),1),e("td",null,[t.wholesale_rate!=null&&t.wholesale_rate!="[]"?(o(!0),s(u,{key:0},_(n.parseToJSON(t.wholesale_rate),(i,p)=>(o(),s(u,{key:i.id},[p==0?(o(),s("span",fe,[h(r(a.toDecimal(i.from)+" - "+a.toDecimal(i.to)+" "+t.product.weight_unit)+" : "+r(a.toDecimal(i.rate))+" ",1),pe])):g("",!0)],64))),128)):g("",!0)]),e("td",null,[e("span",ve,[h(r(a.toDecimal(t.retail_rate))+" ",1),we,h(" "+r(" / "+t.product.weight_unit),1)])]),e("td",null,[e("span",be,r(t.status),1)])]))),128)):(o(),s("tr",Re,ke))])])])])])]),e("div",De,[v(x,{"is-expanded":"","title-position":"left","show-weeknumbers":"right",onDayclick:n.getRateDetail},null,8,["onDayclick"])])])]),_:1})],64)}var Ne=z(F,[["render",Ve]]);export{Ne as default};
