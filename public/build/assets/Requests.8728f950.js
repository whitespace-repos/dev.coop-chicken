import{B as N}from"./BillingSystem.c4b4ece5.js";import{H as q,L as M,_ as v,c as l,a as f,w as R,F as p,r as k,B as P,o as n,d as t,e as g,t as o,f as a,b as d,s as b,m as y,D as O,C as w,R as I,S as A}from"./app.34dda1bd.js";import{h as B}from"./moment.9709ab41.js";import{_ as E}from"./ResponsiveNavLink.4100381f.js";const V={components:{BreezeAuthenticatedLayout:N,Head:q,Link:M},props:["products","shop","carts"],data(){return{form:{paymentOptions:this.$inertia.form({payment_method:"Pay When Stock Received"}),receiveStock:this.$inertia.form({receive_stocks:{}}),stockRequest:this.$inertia.form({products:{}})},selectedRequest:null}},mounted(){feather.replace({"aria-hidden":"true"})},methods:{openReceiveConfirmationModal(s){this.selectedRequest=v.head(v.filter(this.shop.stock_requests,["id",s]));var u=this;v.forEach(this.selectedRequest.requested_products,function(h){u.form.receiveStock.receive_stocks["product-"+h.id]=h.stock_sent})},parseDate:function(s){return B(s).format("ddd, MMM Do YYYY, h:mm:ss a")},savePaymentOptionForStockRequest(s){this.form.paymentOptions.post(this.route("stock.request.payment.option",s),{onSuccess:u=>{this.form.paymentOptions.reset("payment_method")}})},ReceiveStockOnShop(s){this.form.receiveStock.post(this.route("received.stock",s),{onSuccess:u=>{this.form.receiveStock.reset(),$("#receiveStockConfirmModal").modal("hide")}})},isEmpty:function(s){return v.isNil(s)},isNotEmpty:function(s){return!v.isNil(s)},sendStockRequest(s){this.form.stockRequest.post(this.route("stock.request.submit"),{onSuccess:u=>{$("#myModal").modal("hide"),this.form.stockRequest.products=[],window.history.pushState("data","Add to Cart","/make-sale")}})}}},i=s=>(I("data-v-20963770"),s=s(),A(),s),F={class:"container"},L={class:"d-flex justify-content-between align-items-center"},U=i(()=>t("a",{href:"#",class:"Btn mx-2 btn btn-outline-danger btn-sm","data-toggle":"modal","data-target":"#myModal"}," New Stock Request ",-1)),Y=a(" Return Back "),j=i(()=>t("hr",null,null,-1)),z=i(()=>t("ul",{class:"nav nav-pills mb-3",id:"pills-tab",role:"tablist"},[t("li",{class:"nav-item",role:"presentation"},[t("a",{class:"nav-link active",id:"pending-link","data-toggle":"pill",href:"#pending",role:"tab","aria-controls":"pills-pending","aria-selected":"false"},[t("span",{"data-feather":"truck",class:"mr-2"}),a(" Pending Stock Request")])]),t("li",{class:"nav-item",role:"presentation"},[t("a",{class:"nav-link",id:"completed-link","data-toggle":"pill",href:"#completed",role:"tab","aria-controls":"pills-completed","aria-selected":"false"},[t("span",{"data-feather":"check-circle",class:"mr-2"}),a(" Completed Stock Request")])])],-1)),H={class:"tab-content",id:"pills-tabContent"},T={class:"tab-pane fade show active",id:"pending",role:"tabpanel","aria-labelledby":"pills-pending-tab"},G={class:"accordion",id:"accordionExample"},W={class:"card-header p-0",id:"headingOne"},J={class:"d-flex justify-content-between align-items-center font-weight-bold list-unstyled mb-0"},K={class:"mx-2"},Q=["data-target","aria-controls"],X=i(()=>t("span",{"data-feather":"calendar",class:"mr-1"},null,-1)),Z={class:"my-2 d-inline-flex small-sm font-weight-bold ml-3 text-danger"},tt=a(),et={key:0,class:"ml-4"},st=i(()=>t("sup",null,"INR",-1)),ot=a(),at={key:1,class:"ml-3"},lt=i(()=>t("sup",null,"INR",-1)),nt=["onClick"],it=i(()=>t("span",{"data-feather":"check-circle",class:"mr-1"},null,-1)),ct=a(" Receive Stock "),dt=[it,ct],rt=["id"],ut=["onSubmit"],_t={class:"row"},mt={class:"list-group list-group-flush shadow-lg my-3"},ht={class:"list-group-item font-weight-bold text-center"},pt=["src"],gt=a(),vt={key:0,class:"list-group-item px-1 text-center small"},bt={key:0},ft=i(()=>t("span",{"data-feather":"shopping-bag",class:"mr-1"},null,-1)),kt={key:1},yt=i(()=>t("span",{"data-feather":"at-sign",class:"mr-1 ml-3"},null,-1)),St=i(()=>t("sup",null,"INR",-1)),Rt={key:2},wt=i(()=>t("span",{"data-feather":"at-sign",class:"mr-1 ml-3"},null,-1)),Ct=i(()=>t("sup",null,"INR",-1)),xt={class:"list-group-item p-2 text-center small"},Dt={class:"font-weight-semibold"},Nt=a("Created At "),qt={class:"col-12"},Mt=["onSubmit"],Pt={class:"row"},Ot=i(()=>t("label",{class:"col-12",for:"inlineFormInputGroup"},"Choose Payment Method",-1)),It={class:"col-3"},At=i(()=>t("option",{value:"Pay When Stock Received"},"Pay When Stock Received",-1)),Bt=i(()=>t("option",{value:"Pay After Sales Completed"},"Pay After Sales Completed",-1)),Et=[At,Bt],Vt=i(()=>t("div",{class:"col-4 mt-auto"},[t("button",{type:"submit",class:"btn btn-danger btn-sm px-4"},"Submit")],-1)),Ft={key:0},Lt=i(()=>t("div",{class:"alert alert-warning",role:"alert"}," No Record Found ! ",-1)),Ut=[Lt],Yt={class:"tab-pane fade",id:"completed",role:"tabpanel","aria-labelledby":"pills-completed-tab"},jt={class:"accordion",id:"accordionExample1"},zt={class:"card-header p-0",id:"headingOne"},Ht={class:"d-flex justify-content-between align-items-center font-weight-bold list-unstyled mb-0"},Tt={class:"mx-2"},Gt=["data-target","aria-controls"],Wt=i(()=>t("span",{"data-feather":"calendar",class:"mr-1"},null,-1)),Jt={class:"my-2 d-inline-flex small-sm font-weight-bold ml-3 text-danger"},Kt=a(),Qt={key:0,class:"ml-4"},Xt=i(()=>t("sup",null,"INR",-1)),Zt=a(),$t={key:1,class:"ml-3"},te=i(()=>t("sup",null,"INR",-1)),ee=["id"],se=["onSubmit"],oe={class:"row"},ae={class:"list-group list-group-flush shadow-lg my-3"},le={class:"list-group-item font-weight-bold text-center"},ne=["src"],ie=a(),ce={key:0,class:"list-group-item px-1 text-center small"},de=i(()=>t("span",{"data-feather":"shopping-bag",class:"mr-1"},null,-1)),re=i(()=>t("span",{"data-feather":"at-sign",class:"mr-1 ml-3"},null,-1)),ue=i(()=>t("sup",null,"INR",-1)),_e={class:"list-group-item p-2 text-center small"},me={class:"font-weight-semibold"},he=a("Created At "),pe={key:0},ge=i(()=>t("div",{class:"alert alert-warning",role:"alert"}," No Record Found ! ",-1)),ve=[ge],be={class:"modal CmnModal",id:"receiveStockConfirmModal"},fe={class:"modal-dialog modal-lg"},ke={class:"modal-content"},ye={class:"modal-header py-3 border-danger text-danger align-items-center"},Se={key:0,class:"m-0"},Re=a("Confirm and Modify Stock Detail "),we=a("Actual Payment : "),Ce=i(()=>t("a",{href:"javascript:void(0)",class:"close py-0","data-dismiss":"modal","aria-label":"Close"},[t("span",{"aria-hidden":"true"},"\xD7")],-1)),xe={class:"modal-body"},De={class:"table table-bordered table-sm table-striped table-hover"},Ne=i(()=>t("thead",null,[t("tr",null,[t("th",null,"#"),t("th",null,"Product"),t("th",null,"Requested"),t("th",null,"Sent"),t("th",null,"Received")])],-1)),qe={width:"160"},Me={class:"input-group input-group-sm"},Pe=["onUpdate:modelValue"],Oe={class:"input-group-prepend"},Ie={class:"input-group-text"},Ae=i(()=>t("button",{type:"submit",class:"btn btn-outline-danger btn-sm ml-auto"},[t("span",{"data-feather":"check-circle",class:"mr-1"}),a(" Yes ,I Confirm Receive Stock")],-1)),Be={class:"modal",id:"myModal"},Ee={class:"modal-dialog modal-lg"},Ve={class:"modal-content"},Fe=i(()=>t("div",{class:"modal-header py-2 d-flex align-items-center text-danger border-danger"},[t("h6",{class:"mb-0"},[t("span",{"data-feather":"truck",class:"mr-2"}),a(" Request Stock")]),t("button",{type:"button",class:"btn btn-sm btn-link text-danger","data-dismiss":"modal"},"\xD7")],-1)),Le={class:"modal-body"},Ue={class:"row"},Ye={key:0,class:"list-group shadow-lg mb-3"},je={class:"list-group-item font-weight-bold small-sm text-truncate px-2"},ze=["src"],He={class:"text-danger"},Te={class:"list-group-item px-2"},Ge={class:"input-group input-group-sm"},We=["onUpdate:modelValue"],Je={class:"input-group-prepend"},Ke={class:"input-group-text",id:"inputGroup-sizing-sm"},Qe=i(()=>t("div",{class:"modal-footer p-0"},[t("button",{type:"submit",class:"btn btn-danger btn-sm px-5"},"Stock Request")],-1));function Xe(s,u,h,Ze,_,m){const C=k("Head"),x=k("Link"),D=k("BreezeAuthenticatedLayout"),S=P("maska");return n(),l(p,null,[f(C,{title:"Dashboard"}),f(D,null,{default:R(()=>[t("section",null,[t("div",F,[t("div",L,[U,f(x,{href:s.route("make-sale"),class:"heading text-danger"},{default:R(()=>[Y]),_:1},8,["href"])]),j,z,t("div",H,[t("div",T,[t("div",G,[(n(!0),l(p,null,g(h.shop.stock_requests.filter(e=>e.status!="Completed"),(e,r)=>(n(),l("div",{class:"card",key:e.id},[t("div",W,[t("ul",J,[t("li",null,[t("b",K,o(r+1)+". ",1),t("button",{class:"btn btn-link text-left p-1 collapsed border-0 d-inline-flex align-items-center",type:"button","data-toggle":"collapse","data-target":"#collapse"+r,"aria-expanded":"true","aria-controls":"collapse"+r},[X,a(" "+o(e.date),1)],8,Q),t("h6",Z,[a("Status - "+o(e.status)+" ",1),t("sub",null," on "+o(m.parseDate(e.updated_at)),1),tt,e.status!="Requested"?(n(),l("small",et,[a("Actual Payment : "+o(s.toDecimal(e.actual_payment))+" ",1),st])):d("",!0),ot,e.status=="Completed"?(n(),l("small",at,[a(" Receive Payment : "+o(s.toDecimal(e.payment_received))+" ",1),lt])):d("",!0)])]),t("li",null,[e.status=="Sent"?(n(),l("button",{key:0,class:"btn btn-danger btn-sm my-1 py-0","data-toggle":"modal","data-target":"#receiveStockConfirmModal",onClick:c=>m.openReceiveConfirmationModal(e.id)},dt,8,nt)):d("",!0)])])]),t("div",{id:"collapse"+r,class:"collapse container-fluid","aria-labelledby":"headingOne","data-parent":"#accordionExample"},[t("form",{onSubmit:b(c=>s.approveStockRequest(e.id),["prevent"]),class:"w-100"},[t("div",_t,[(n(!0),l(p,null,g(e.requested_products,c=>(n(),l("div",{class:"col-3",key:c.id},[t("ul",mt,[t("li",ht,[t("img",{src:c.product.image,class:"img-fluid mr-2",width:"20"},null,8,pt),gt,t("span",null,o(c.product.product_name),1)]),e.status!="Completed"?(n(),l("li",vt,[e.type=="Direct"?(n(),l("b",bt,[ft,a(" "+o(s.toDecimal(c.stock_sent)+" "+c.product.weight_unit),1)])):(n(),l("b",kt,[yt,a(" "+o(s.toDecimal(c.stock_request)+" "+c.product.weight_unit)+" ",1),St])),e.status!="Requested"?(n(),l("b",Rt,[wt,a(" "+o(s.toDecimal(c.supply_rate))+" ",1),Ct])):d("",!0)])):d("",!0),t("li",xt,[t("span",Dt,[Nt,t("sub",null,o(m.parseDate(e.created_at)),1)])])])]))),128)),t("div",qt,[e.status=="Approved"?(n(),l("form",{key:0,onSubmit:b(c=>m.savePaymentOptionForStockRequest(e.id),["prevent"])},[t("div",Pt,[Ot,t("div",It,[y(t("select",{class:"form-control form-control-sm p-0","onUpdate:modelValue":u[0]||(u[0]=c=>_.form.paymentOptions.payment_method=c)},Et,512),[[O,_.form.paymentOptions.payment_method]])]),Vt])],40,Mt)):d("",!0)])])],40,ut)],8,rt)]))),128))]),h.shop.stock_requests.filter(e=>e.status!="Completed").length==0?(n(),l("div",Ft,Ut)):d("",!0)]),t("div",Yt,[t("div",jt,[(n(!0),l(p,null,g(h.shop.stock_requests.filter(e=>e.status=="Completed"),(e,r)=>(n(),l("div",{class:"card",key:e.id},[t("div",zt,[t("ul",Ht,[t("li",null,[t("b",Tt,o(r+1)+". ",1),t("button",{class:"btn btn-link text-left p-1 collapsed border-0 d-inline-flex align-items-center",type:"button","data-toggle":"collapse","data-target":"#collapse"+r,"aria-expanded":"true","aria-controls":"collapse"+r},[Wt,a(" "+o(e.date),1)],8,Gt),t("h6",Jt,[a("Status - "+o(e.status)+" ",1),t("sub",null," on "+o(m.parseDate(e.updated_at)),1),Kt,e.status!="Requested"?(n(),l("small",Qt,[a("Actual Payment : "+o(s.toDecimal(e.actual_payment))+" ",1),Xt])):d("",!0),Zt,e.status=="Completed"?(n(),l("small",$t,[a(" Receive Payment : "+o(s.toDecimal(e.payment_received))+" ",1),te])):d("",!0)])])])]),t("div",{id:"collapse"+r,class:"collapse container-fluid","aria-labelledby":"headingOne","data-parent":"#accordionExample1"},[t("form",{onSubmit:b(c=>s.approveStockRequest(e.id),["prevent"]),class:"w-100"},[t("div",oe,[(n(!0),l(p,null,g(e.requested_products,c=>(n(),l("div",{class:"col-3",key:c.id},[t("ul",ae,[t("li",le,[t("img",{src:c.product.image,class:"img-fluid mr-2",width:"20"},null,8,ne),ie,t("span",null,o(c.product.product_name),1)]),e.status=="Completed"?(n(),l("li",ce,[t("b",null,[de,a(" "+o(s.toDecimal(c.stock_sent)+" "+c.product.weight_unit),1)]),t("b",null,[re,a(" "+o(s.toDecimal(c.stock_request)+" "+c.product.weight_unit)+" ",1),ue])])):d("",!0),t("li",_e,[t("span",me,[he,t("sub",null,o(m.parseDate(e.created_at)),1)])])])]))),128))])],40,se)],8,ee)]))),128))]),h.shop.stock_requests.filter(e=>e.status=="Completed").length==0?(n(),l("div",pe,ve)):d("",!0)])])])]),t("div",be,[t("div",fe,[t("div",ke,[t("div",ye,[m.isNotEmpty(_.selectedRequest)?(n(),l("h6",Se,[Re,t("small",null,[we,t("sub",null,o(_.selectedRequest.actual_payment),1)])])):d("",!0),Ce]),t("div",xe,[m.isNotEmpty(_.selectedRequest)?(n(),l("form",{key:0,method:"POST",onSubmit:u[1]||(u[1]=b(e=>m.ReceiveStockOnShop(_.selectedRequest.id),["prevent"]))},[t("table",De,[Ne,t("tbody",null,[(n(!0),l(p,null,g(_.selectedRequest.requested_products,e=>(n(),l("tr",{key:e.id},[t("td",null,o(e.id),1),t("td",null,o(e.product.product_name),1),t("td",null,o(s.toDecimal(e.stock_request)+" "+e.product.weight_unit),1),t("td",null,o(s.toDecimal(e.stock_sent)+" "+e.product.weight_unit),1),t("td",qe,[t("div",Me,[y(t("input",{class:"form-control",id:"inlineFormInputGroup",placeholder:"Stock Receive","onUpdate:modelValue":r=>_.form.receiveStock.receive_stocks["product-"+e.id]=r},null,8,Pe),[[S,"#*.##"],[w,_.form.receiveStock.receive_stocks["product-"+e.id]]]),t("div",Oe,[t("div",Ie,o(e.product.weight_unit),1)])])])]))),128))])]),Ae],32)):d("",!0)])])])]),t("div",Be,[t("div",Ee,[t("div",Ve,[t("form",{method:"POST",onSubmit:u[2]||(u[2]=b((...e)=>m.sendStockRequest&&m.sendStockRequest(...e),["prevent"])),class:"mb-0"},[Fe,t("div",Le,[t("div",Ue,[(n(!0),l(p,null,g(h.shop.products,e=>(n(),l("div",{class:"col-4",key:e.id},[e.stock?(n(),l("ul",Ye,[t("li",je,[t("img",{src:e.image,class:"img-fluid mr-2",width:"20"},null,8,ze),a(" "+o(e.product_name)+" ",1),t("span",He,"("+o(s.toDecimal(e.association.stock)+" "+e.weight_unit)+" )",1)]),t("li",Te,[t("div",Ge,[y(t("input",{min:"0",onkeypress:"return event.charCode >= 48",class:"form-control",placeholder:"0","onUpdate:modelValue":r=>_.form.stockRequest.products["product-"+e.id]=r},null,8,We),[[w,_.form.stockRequest.products["product-"+e.id]],[S,"#*.##"]]),t("div",Je,[t("span",Ke,o(e.weight_unit),1)])])])])):d("",!0)]))),128))])]),Qe],32)])])])]),_:1})],64)}var os=E(V,[["render",Xe],["__scopeId","data-v-20963770"]]);export{os as default};
